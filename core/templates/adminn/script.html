{% load static %}
    <script src="{% static 'assets/js/lib_dtp000.js'%}"></script>
    <script src="{% static 'plugins/jquery/jquery.min.js'%}"></script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'plugins/bootstrap/js/bootstrap.js'%}"></script>
    <!-- DataTables  & Plugins -->
    <script src="{% static 'plugins/datatables/jquery.dataTables.js'%}"></script>
    <script src="{% static 'plugins/datatables-bs4/js/dataTables.bootstrap4.js'%}"></script>
    <script src="{% static 'plugins/datatables-responsive/js/dataTables.responsive.js'%}"></script>
    <script src="{% static 'plugins/datatables-responsive/js/responsive.bootstrap4.js'%}"></script>
    <script src="{% static 'plugins/datatables-buttons/js/dataTables.buttons.js'%}"></script>
    <script src="{% static 'plugins/datatables-buttons/js/buttons.bootstrap4.js'%}"></script>
    <script src="{% static 'plugins/jszip/jszip.js'%}"></script>
    <script src="{% static 'plugins/pdfmake/pdfmake.js'%}"></script>
    <script src="{% static 'plugins/pdfmake/vfs_fonts.js'%}"></script>
    <script src="{% static 'plugins/datatables-buttons/js/buttons.html5.js'%}"></script>
    <script src="{% static 'plugins/datatables-buttons/js/buttons.print.js'%}"></script>
    <script src="{% static 'plugins/datatables-buttons/js/buttons.colVis.js'%}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'lib/dist/js/adminlte.js'%}"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="{% static 'lib/dist/js/demo.js'%}"></script>

    <script src="~/js/Category/Index.js" asp-append-version="true"></script>
    <script>
        const loadDataApi = async () => {
            let dataCategories = await getDataAPI('https://localhost:7299/api/categories');
            if (dataCategories == null) {
                alert('Sự cố kết nối đến api');
                return;
            }
            if (dataCategories.success) {
                loadDataToTable(dataCategories.data);
            } else {
                alert(`Lỗi: ${dataCategories.message}`);
            }
        }
        const loadDataToTable = (listCategories) => {
            let elementTable = document.querySelector('#CategoryTable tbody');
            listCategories.forEach(category => {
                const wrapper = document.createElement('tr')
                wrapper.innerHTML = [
                    `<td>${category.name}</td>`,
                    `<td><button type="button" class="btn btn-sm bg-warning" data-toggle="modal" data-target="#ChucVuViewModal" >
                            <i class="fas fa-eye" ></i>
                        </button>
                        <button type="button" class="btn btn-sm bg-warning view-chucvu" data-toggle="modal" data-target="#ChucVuViewModal" >
                                    <i class="fas fa-pencil-alt" ></i>
                        </button>
                    </td>`,
                    ``
                ].join('');
                elementTable.appendChild(wrapper);
            })
        }
        const showModalData = (nodeCurrent) => {
            let modalData = document.getElementById('modal-category-info');

        }
        $(document).ready(function () {
            loadDataApi();
            //$('#CategoryTable').DataTable({

            //});
        });
        </script>